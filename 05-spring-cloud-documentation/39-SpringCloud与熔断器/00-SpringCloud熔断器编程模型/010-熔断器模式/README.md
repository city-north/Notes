# 010-熔断器模式

[TOC]

## 什么是断路器

“断路器”本身是一种开关装置，当某个服务单元发生故障之后，通过断路器的故障监控 (类似熔断保险丝) ，向调用方返回一个服务预期的，可处理的备选响应 (FallBack) ，而不是长时间的等待或者抛出调用方法无法处理的异常，这样就可以保证了服务调用方的线程不会被长时间，**不必要的占用，从而避免了故障在分布式系统中的蔓延，乃至雪崩。**

## 为什么要有熔断器模式

应用外部依赖的API不可用, 该应用一直在超时并重试, 从而引发整体无法提供服务, 如果这时能有一个类似于熔断器的组件

- **让客户端在发生多次调用失败的情况下不再重试调用**

- 当计时器达到一定阈值后可以再尝试, 尝试如果成功则可以继续访问, 失败则继续进入熔断

## 雪崩特点

对于高流量的应用来说，单一的后端依赖可能会导致所有服务器上的所有资源都在几十秒内饱和。

比失败更糟糕的是，这些应用程序还可能导致服务之间的延迟增加，备份队列，线程和其他系统资源紧张，导致整个系统发生更多的级联故障。

这些都表示需要对故障和延迟进行隔离和管理，以达到单个依赖关系的失败而不影响整个应用程序或系统运行

## 断路器程序是在服务端还是客户端

客户端， 服务端在出现故障时无法进行响应