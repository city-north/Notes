# 010-Reactor反应器模式中的IO事件的处理流程

[TOC]

# 处理流程

- 第一步 ：通道注册
- 第二步 ：查询选择
- 第三步：事件分发
- 第四步：完成真正的IO操作和业务处理

## 第一步：通道注册

IO源于通道Channel , IO是和通道（对于底层链接而言）强关联的， 一个IO事件， 一定属于某个通道， 但是如果要查询通道的事件， 首先将通道注册到选择器， 只需要提前注册到Selector选择器即可，IO事件就会被选择器查询到

## 第二步：查询选择

在反应器模式中， 一个反应器（或者 SubReactor) 子反应器 会负责一个线程， 不停的轮训， 查询选择器中的IO事件（选择键）

## 第三步：事件分发

如果查询到一个IO事件， 则分发给与IO事件有绑定关系的Handler 业务处理器的功能， 反应器模式仅仅是利用了Java NIO的优势而已

## 第四步：完成真正的IO操作和业务处理

这一步由Handler处理

上面的第一步和第二步实际上是Java NIO的功能， 反应器模式仅仅是利用了 Java NIO 的优势而已

![](http://processon.com/chart_image/608ebb027d9c084071a7659e.png)